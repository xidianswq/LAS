"""
日期工具模块
提供日期计算和格式化功能
"""

from datetime import datetime, date
from typing import Optional

def format_date(date_obj: datetime) -> str:
    """
    格式化日期为字符串
    
    Args:
        date_obj: 日期对象
        
    Returns:
        格式化后的日期字符串
    """
    return date_obj.strftime("%Y-%m-%d")


def parse_date(date_str: str) -> Optional[datetime]:
    """
    解析日期字符串
    
    Args:
        date_str: 日期字符串
        
    Returns:
        日期对象或None
    """
    try:
        return datetime.strptime(date_str, "%Y-%m-%d")
    except ValueError:
        return None


def is_valid_date(date_str: str) -> bool:
    """
    检查日期字符串是否有效
    
    Args:
        date_str: 日期字符串
        
    Returns:
        是否有效
    """
    return parse_date(date_str) is not None


def get_date_range(start_date: str, end_date: str) -> list:
    """
    获取日期范围内的所有日期
    
    Args:
        start_date: 开始日期
        end_date: 结束日期
        
    Returns:
        日期列表
    """
    start = parse_date(start_date)
    end = parse_date(end_date)
    
    if not start or not end:
        return []
    
    dates = []
    current = start
    while current <= end:
        dates.append(format_date(current))
        current = current.replace(day=current.day + 1)
    
    return dates 